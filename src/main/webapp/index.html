<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Tongji Search</title>

    <!-- Bootstrap core CSS -->
    <link href="styles/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="styles/cover.css" rel="stylesheet">
    <link href="styles/index.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="scripts/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="site-wrapper">
      <div class="site-wrapper-inner">
        <div class="cover-container">
          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand">Tongji Search</h3>
              <nav>
                <ul class="nav pull-right">
                  <li>2015年6月1日</li>
                  <li>第14周</li>
                </ul>
              </nav>
            </div>
          </div>
          <div class="inner cover">
            <div class="tongji-logo">
              <img src="images/logo.png">
            </div>
            <div class="search-box">
              <div class="form-signin search-form">
                <input type="text" id="search-input" name="key" placeholder="搜索同济" class="form-control search-input-text" id="search-input">
                <input type="submit" id="search-btn" value="" class="search-input-btn">
              </div>
              <!--<form id="search-form" class="form-signin search-form">-->
              <!--</form>-->
            </div>  
            <div class="message-div" id="new-message" style="display: none;">
              <div>
          
              </div>
              <p>最新消息</p>
            </div>
          </div>
          <div class="mastfoot">
            <div class="inner">
              <p><a href="http://localhost:8080">同济搜索</a>, 专注于更好的校内搜索</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="scripts/ie10-viewport-bug-workaround.js"></script>
    
    <script>
      $(document).keydown(function (event) {
        if (event.which == 13) {
          console.log('start search');
          var searchKey = $('#search-input').val();
          if (searchKey !== '') {
            $.ajax({
            type: 'GET',
            url: 'http://localhost:8080/s?key=' + $('#search-input').val(),
            success: function (data) {
              console.log(data);
              loadResultPage(data);
            }
          });
          } else {
            alert('请输入您想搜索的内容');
          }
        }
      })
      
      function loadResultPage(resultList) {
        
      }
      // $('#search-input').bind('keyup',function(){
      //   var searchText = $('#search-input').val();
      //   $.get('http://localhost:8080/s?key='+searchText,function(data){
      //     console.log(data);
      //     // var content = data.name;
      //     // console.log(content);
      //     // content = '<li>' + content + '</li>';
      //     // $('#search-suggest').html(content);
      //     // $('#search-suggest').show().css({
      //     // top:$('#search-form').offset().top + $('#search-form').height()+10,
      //     // left:$('#search-form').offset().left,
      //     // position:'absolute'
      //   });
      // },'json');
    // });
    // $(document).bind('click',function(){
    //   $('#search-suggest').hide();
    // })
    // $(document).ready(function(){
    //   $.get('http://localhost:8080/newMessage',function(newMessage){
    //     //解析newMessage
    //     $('#new-message').show().css({
    //       //newMessage的位置
    //       //请求newMessage失败了怎么办？
    //     });
    //   },'json')
    // });
    </script>
  </body>
</html>
